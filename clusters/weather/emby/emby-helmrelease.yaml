---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: emby
  namespace: flux-system
spec:
  chart:
    spec:
      chart: emby
      reconcileStrategy: ChartVersion
      sourceRef:
        kind: HelmRepository
        name: emby
  targetNamespace: emby
  install:
    createNamespace: true
  interval: 10m
  values:
    service:
      type: ClusterIP
      port: 8096

    ingress:
      enabled: false
      className: ""
      annotations: {}
        # kubernetes.io/ingress.class: nginx
        # kubernetes.io/tls-acme: "true"
      hosts:
        - host: chart-example.local
          paths:
            - path: /
              pathType: ImplementationSpecific
      tls: []
      #  - secretName: chart-example-tls
      #    hosts:
      #      - chart-example.local

    persistence:
      # -- enable persistence?
      enabled: false
      # -- existing claim
      existingClaim:
      # -- desired storageClass
      storageClass:
      # -- storage access mode
      accessMode: ReadWriteOnce
      # -- storage size
      size: 20Gi

    nodeSelector:
      kubernetes.io/hostname: avalanche
